@model OutilEnquete.ViewModels.QuestionnaireViewModel
@{
    ViewBag.Title = "Edit Survey";
}

@section scripts
{

    <script type="text/javascript">
        $(function() {
            ko.validation.init({ insertMessages: false });
            ko.applyBindings(new SurveyModel(@Html.Raw(Model.ToJson())));

            $('#survey-form').submit(function() {
                var $form = $(this),
                    url = $form.attr('action'),
                    params = $form.serialize();

                var result = $.post(url, params);

                result.error(function() {
                    toastr.error('erreur de sauvegarde de Questionnaire');
                });

                return false;
            });
        });
    </script>
}

@Html.EditorForModel(new {title = "Edit Survey", url = Url.Action("Edit", new {id = Model.Id})})